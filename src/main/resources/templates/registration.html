<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>SSH | Зареєструватись </title>
    <link
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
            crossorigin="anonymous"
    />
    <link
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
            crossorigin="anonymous"
    />
</head>

<body style="padding-top: 100px">
<div th:replace="navbar :: navbar">
</div>

<main role="main">
    <div class="d-flex justify-content-center align-items-center">
        <div class="row" style="width: 60%">
            <div class="col-md-12">
                <div class="card w-100 my-4">
                    <div class="card-header bg-light text-info">
                        <h4 class="text-center">Зареєструватися</h4>
                    </div>
                    <div class="card-body" style="width:auto">
                        <form action="#" th:action="@{'/registration'}" th:object="${user}"
                              th:method="post" onsubmit="return validate(this);" style="width:90% ">

                            <div class="row">
                                <div class="col m-2">ПІБ<span style="color: red;">*</span>:</div>
                                <div class="col m-2"><input style="width: 100%" required id="form-pib" type="text"
                                                            th:field="*{pib}"
                                                            name="pib"/></div>
                            </div>

                            <div class="row">
                                <div class="col m-2 ">Логін<span style="color: red;">*</span>: (електрона пошта або номер телефону у форматі
                                    +(123)4567890):
                                </div>
                                <div class="col m-2"><input style="width: 100%" required id="form-login" type="text"
                                                            th:field="*{login}"
                                                            name="login"/>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col m-2">Пароль<span style="color: red;">*</span>:</div>
                                <div class="col m-2"><input style="width: 100%" id="form-password" type="password"
                                                            th:field="*{password}"
                                                            name="password"/></div>
                            </div>
                            <div class="row">
                                <div class="col m-2 ">Підтвердити пароль<span style="color: red;">*</span>:</div>
                                <div class="col m-2"><input style="width: 100%" id="form-password-repeat"
                                                            type="password"
                                                            name="password-repeat"/></div>
                            </div>

                            <div class="text-right  my-2 mx-2 ">
                                <input
                                        class="btn btn-warning"
                                        type="submit"
                                        value="Зберегти"
                                />
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
</main>
<script>
    function validate() {
        const password = document.getElementById('form-password')?.value || "";
        const login = document.getElementById('form-login')?.value || "";
        const check_password = document.getElementById('form-password-repeat')?.value || "";
        const reEmail = new RegExp("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$");
        const rePhone = new RegExp("^[+]*[\\(]?[0-9]{1,4}[\\)]?[\\s\\./0-9]*$");
        const rePassword = new RegExp("^(?=.*[0-9])(?=.*[a-z]).{8,32}$");

        if (login !== "" && !reEmail.test(login) && !rePhone.test(login)) {
            alert("Логін не коректний! Це повинна бути пошта або номер телефону.");
            return false;
        } else if (password !== "" && !rePassword.test(password)) {
            alert("Пароль не коректний! Повинен містити не менше 8 символів, літер верхньої та нижньої клавіші, цифр.");
            return false;
        } else if (password !== "" && password !== check_password) {
            alert("Паролі не співпадають!");
            return false;
        }
    }
</script>

<script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"
></script>

<script
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.1/cjs/popper.min.js"
        integrity="sha256-T3bYsIPyOLpEfeZOX4M7J59ZoDMzuYFUsPiSN3Xcc2M="
        crossorigin="anonymous"
></script>

<script
        src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"
></script>
</body>
</html>